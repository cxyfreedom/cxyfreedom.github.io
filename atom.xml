<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Field of Hope</title>
  
  <subtitle>无论是光凭信念,还是光凭力量都是不行的</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://reishin.me/"/>
  <updated>2018-09-10T15:01:27.000Z</updated>
  <id>https://reishin.me/</id>
  
  <author>
    <name>CxyFreedom</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Hexo博客 SEO 优化</title>
    <link href="https://reishin.me/blog-seo-optimization/"/>
    <id>https://reishin.me/blog-seo-optimization/</id>
    <published>2018-09-10T12:31:51.000Z</published>
    <updated>2018-09-10T15:01:27.000Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><p>为了能让我们的博客被搜索引擎更好的收录，我们需要对 SEO 进行优化。</p><a id="more"></a><h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><h3 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h3><p>为了能够同时被 Google 和 Baidu 收录，我们需要两个插件<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-sitemap --save</span><br><span class="line">npm install hexo-generator-baidu-sitemap --save</span><br></pre></td></tr></table></figure></p><h3 id="修改配置文件"><a href="#修改配置文件" class="headerlink" title="修改配置文件"></a>修改配置文件</h3><p>修改<span id="inline-blue">站点配置文件</span>，将以下内容添加进去<br><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">sitemap</span>:</span><br><span class="line">  <span class="attribute">path</span>: sitemap.xml</span><br><span class="line"><span class="attribute">baidusitemap</span>:</span><br><span class="line">  <span class="attribute">path</span>: baidusitemap.xml</span><br><span class="line"></span><br><span class="line"><span class="attribute">url</span>: <span class="attribute">https</span>:<span class="comment">//reishin.me</span></span><br></pre></td></tr></table></figure></p><p>添加完后执行 <code>hexo g</code>，然后就能在 <code>public</code> 目录下找到 <code>sitemap.xml</code> 和 <code>baidusitemap.xml</code>。</p><h2 id="添加蜘蛛协议"><a href="#添加蜘蛛协议" class="headerlink" title="添加蜘蛛协议"></a>添加蜘蛛协议</h2><p>在站点的 <code>source</code> 目录下创建 <code>robots.txt</code> 并添加以下内容：<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">User-<span class="string">agent:</span> *</span><br><span class="line"><span class="string">Allow:</span> /</span><br><span class="line"><span class="string">Allow:</span> <span class="regexp">/archives/</span></span><br><span class="line"><span class="string">Allow:</span> <span class="regexp">/categories/</span></span><br><span class="line"><span class="string">Allow:</span> <span class="regexp">/tags/</span></span><br><span class="line"><span class="string">Disallow:</span> <span class="regexp">/vendors/</span></span><br><span class="line"><span class="string">Disallow:</span> <span class="regexp">/js/</span></span><br><span class="line"><span class="string">Disallow:</span> <span class="regexp">/css/</span></span><br><span class="line"><span class="string">Disallow:</span> <span class="regexp">/fonts/</span></span><br><span class="line"></span><br><span class="line"><span class="string">Sitemap:</span> <span class="string">https:</span><span class="comment">//reishin.me/sitemap.xml</span></span><br><span class="line"><span class="string">Sitemap:</span> <span class="string">https:</span><span class="comment">//reishin.me/baidusitemap.xml</span></span><br></pre></td></tr></table></figure></p><p id="div-border-left-green">域名需要替换成你自己的</p><h2 id="提交站点到-Google"><a href="#提交站点到-Google" class="headerlink" title="提交站点到 Google"></a>提交站点到 Google</h2><ol><li><p>打开 [Google Search Console]，添加博客地址</p></li><li><p>站点验证</p><p> 官方给出了多种验证的方式，我选择的是使用 <code>HTML</code> 标记的方法。将官方给出的代码复制到 <code>themes/next/layout/_partials/head/head.swig</code> 中</p> <figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta <span class="attribute">charset</span>=<span class="string">"UTF-8"</span>/&gt;</span><br><span class="line">&lt;meta <span class="attribute">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attribute">content</span>=<span class="string">"IE=edge"</span> /&gt;</span><br><span class="line">&lt;meta <span class="attribute">name</span>=<span class="string">"viewport"</span> <span class="attribute">content</span>=<span class="string">"width=device-width, initial-scale=1, maximum-scale=2"</span>/&gt;</span><br><span class="line">&lt;meta <span class="attribute">name</span>=<span class="string">"theme-color"</span> <span class="attribute">content</span>=<span class="string">"&#123;&#123; theme.android_chrome_color &#125;&#125;"</span>&gt;</span><br><span class="line"><span class="comment"># 下面这行就是我们添加的内容</span></span><br><span class="line">&lt;meta <span class="attribute">name</span>=<span class="string">"google-site-verification"</span> <span class="attribute">content</span>=<span class="string">"xxxxxxxx"</span> /&gt;</span><br></pre></td></tr></table></figure></li><li><p>测试 robots.txt</p><p> 选择左边菜单栏中的 <code>抓取 &gt; robots.txt测试工具</code> 进行测试即可。</p></li><li><p>提交站点地图</p><p> 选择左边菜单栏中的 <code>抓取 &gt; 站点地图</code> ，在打开的页面中首先选择右上角的 <code>添加/测试站点地图</code> 按钮，测试通过后就可以提交。</p></li><li><p>Google 抓取</p><p> 选择左边菜单栏中的 <code>抓取 &gt; Google 抓取工具</code> ，填写需要抓取的 URL，点击抓取，最后点击请求编入索引即可。这样我们的博客就成功提交到 Google。</p></li></ol><h2 id="Baidu-主动提交链接方法"><a href="#Baidu-主动提交链接方法" class="headerlink" title="Baidu 主动提交链接方法"></a>Baidu 主动提交链接方法</h2><p>为了能够加快被百度收录，采用自动提交链接的方式。</p><ol><li><p>安装插件</p> <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="keyword">install</span> hexo-baidu-<span class="keyword">url</span>-submit <span class="comment">--save</span></span><br></pre></td></tr></table></figure></li><li><p>站点验证</p><p> 验证方法和 Google 的类似。</p></li><li><p>配置</p><p> 修改<span id="inline-blue">站点配置文件</span>，将以下内容添加进去</p> <figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">baidu_url_submit</span>:</span><br><span class="line">  <span class="attribute">count</span>: <span class="number">1</span> <span class="comment">// 代表提交最新的三个链接</span></span><br><span class="line">  <span class="attribute">host</span>: <span class="attribute">https</span>:<span class="comment">//reishin.me // 在百度站长平台中注册的域名</span></span><br><span class="line">  <span class="attribute">token</span>: your_token <span class="comment">// token</span></span><br><span class="line">  <span class="attribute">path</span>: baidu_sitemap.txt <span class="comment">// 文本文档的地址</span></span><br><span class="line"></span><br><span class="line"><span class="attribute">deploy</span>:</span><br><span class="line">- <span class="attribute">type</span>: baidu_url_submitter</span><br></pre></td></tr></table></figure><p> 最后部署的时候，就会自动提交。</p></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;为了能让我们的博客被搜索引擎更好的收录，我们需要对 SEO 进行优化。&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Python源码解析——可重入锁RLock</title>
    <link href="https://reishin.me/python-source-code-parse-with-rlock/"/>
    <id>https://reishin.me/python-source-code-parse-with-rlock/</id>
    <published>2018-08-20T12:07:47.000Z</published>
    <updated>2018-09-10T12:29:40.000Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><p>本文主要针对 Python 中的可重入锁 RLock 的源码剖析。</p><a id="more"></a><h2 id="源码（带注释）"><a href="#源码（带注释）" class="headerlink" title="源码（带注释）"></a>源码（带注释）</h2><p>可重入锁 RLock 的源码在 <code>threading.py</code> 文件中</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">RLock</span><span class="params">(*args, **kwargs)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    该工厂函数返回一个新的可重入锁。</span></span><br><span class="line"><span class="string">    一个可重入锁必须由创建它的线程释放。一旦一个线程获得了一个可重入锁，该线程可用无阻塞的再次获取。每次获取锁后必须进行释放。</span></span><br><span class="line"><span class="string">    Python支持用C语言实现的 RLock 锁和用Python本身实现的 RLock 锁，默认使用的是C语言版本的</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="keyword">if</span> _CRLock <span class="keyword">is</span> <span class="keyword">None</span>:</span><br><span class="line">        <span class="keyword">return</span> _PyRLock(*args, **kwargs)</span><br><span class="line">    <span class="keyword">return</span> _CRLock(*args, **kwargs)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_RLock</span>:</span></span><br><span class="line">    <span class="comment"># RLock的核心即 acquire 和 release 这两个方法</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self._block = _allocate_lock()  <span class="comment"># 分配一个锁</span></span><br><span class="line">        self._owner = <span class="keyword">None</span>  <span class="comment"># RLock对象所属的线程pid</span></span><br><span class="line">        self._count = <span class="number">0</span>     <span class="comment"># 锁计数器，对于RLock对象所在线程，每获取一次就加一，相对的每次释放就减一，当减到零时，就会释放内部创建的锁，这样其他线程就可以继续获得这个锁。</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">acquire</span><span class="params">(self, blocking=True, timeout=<span class="number">-1</span>)</span>:</span></span><br><span class="line">        me = get_ident()    <span class="comment"># 获取当前线程的pid</span></span><br><span class="line">        <span class="keyword">if</span> self._owner == me:   <span class="comment"># 如果当前线程的pid是RLock对象所在的线程，那么对计数器进行加一操作</span></span><br><span class="line">            self._count += <span class="number">1</span></span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">        <span class="comment"># 如果不满足上述条件：</span></span><br><span class="line">        <span class="comment"># 1. 当前线程非RLock对象所在线程</span></span><br><span class="line">        <span class="comment"># 2. RLock对象还未持有锁，即 self.owner = None</span></span><br><span class="line">        <span class="comment"># 那么当 blocking=True 时，当前线程被阻塞，直到持有锁的线程将锁释放后，rc = True</span></span><br><span class="line">        <span class="comment"># 当 blocking=False 时，可以非阻塞的获取。如果获取锁成功，rc = True；获取失败，rc = False</span></span><br><span class="line">        rc = self._block.acquire(blocking, timeout)</span><br><span class="line">        <span class="keyword">if</span> rc:</span><br><span class="line">            self._owner = me    <span class="comment"># 记录持有锁的线程的pid</span></span><br><span class="line">            self._count = <span class="number">1</span>     <span class="comment"># 将计数器重置到1</span></span><br><span class="line">        <span class="keyword">return</span> rc</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">release</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> self._owner != get_ident():  <span class="comment"># 如果持有锁的线程非当前线程，则抛异常</span></span><br><span class="line">            <span class="keyword">raise</span> RuntimeError(<span class="string">"cannot release un-acquired lock"</span>)</span><br><span class="line">        self._count = count = self._count - <span class="number">1</span>   <span class="comment"># 每次释放对计数器进行减一</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> count:   <span class="comment"># 如果计数器减到0，那么释放RLock内部的锁，此时其他线程就可以获取到锁</span></span><br><span class="line">            self._owner = <span class="keyword">None</span>    <span class="comment"># 还原RLock对象持有锁的拥有者None</span></span><br><span class="line">            self._block.release() <span class="comment"># 释放锁</span></span><br></pre></td></tr></table></figure><h2 id="acquire-方法流程图"><a href="#acquire-方法流程图" class="headerlink" title="acquire 方法流程图"></a>acquire 方法流程图</h2><div id="flowchart-0" class="flow-chart"></div><h2 id="release-方法流程图"><a href="#release-方法流程图" class="headerlink" title="release 方法流程图"></a>release 方法流程图</h2><div id="flowchart-1" class="flow-chart"></div><h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><p>为了验证上述分析内容，对源码增加一些打印，便于我们了解实际的运行机制。</p><p>测试代码如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_RLock</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self._lock = threading.Lock()</span><br><span class="line">        self._owner = <span class="number">0</span></span><br><span class="line">        self._count = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">acquired</span><span class="params">(self, block=True, timeout=<span class="number">-1</span>)</span>:</span></span><br><span class="line">        me = threading.get_ident()</span><br><span class="line">        <span class="keyword">if</span> self._owner == me:</span><br><span class="line">            self._count += <span class="number">1</span></span><br><span class="line">            print(<span class="string">f"acquired count = <span class="subst">&#123;self._count&#125;</span>"</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        rc = self._lock.acquire(block, timeout)</span><br><span class="line">        <span class="keyword">if</span> rc:</span><br><span class="line">            self._count = <span class="number">1</span></span><br><span class="line">            print(<span class="string">f"acquired count = <span class="subst">&#123;self._count&#125;</span>"</span>)</span><br><span class="line">            self._owner = me</span><br><span class="line">        <span class="keyword">return</span> rc</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">release</span><span class="params">(self)</span>:</span></span><br><span class="line">        me = threading.get_ident()</span><br><span class="line">        <span class="keyword">if</span> self._owner != me:</span><br><span class="line">            <span class="keyword">raise</span> RuntimeError(<span class="string">"can not release the un-acquired the lock"</span>)</span><br><span class="line">        self._count = count = self._count - <span class="number">1</span></span><br><span class="line">        print(<span class="string">f"release count = <span class="subst">&#123;self._count&#125;</span>"</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> count:</span><br><span class="line">            self._owner = <span class="keyword">None</span></span><br><span class="line">            self._lock.release()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">worker</span><span class="params">(lock)</span>:</span></span><br><span class="line">    print(<span class="string">"====非可重入锁所在线程释放RLock内部锁===="</span>)</span><br><span class="line">    pid = threading.current_thread()</span><br><span class="line">    print(<span class="string">f"current pid = <span class="subst">&#123;pid&#125;</span>"</span>)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        lock.release()</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        print(str(e))</span><br><span class="line">        print(<span class="string">"====非可重入锁所在线程释放RLock内部锁失败===="</span>)</span><br><span class="line">    print(<span class="string">"waiting......"</span>)</span><br><span class="line">    lock.acquired()</span><br><span class="line"></span><br><span class="line">    print(<span class="string">f"RLock所在线程已释放所有锁，worker线程获取RLock内部锁成功"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    print(<span class="string">"生成一个R锁对象"</span>)</span><br><span class="line">    rlock = RLock()</span><br><span class="line">    print(<span class="string">"主线程获取RLock"</span>)</span><br><span class="line">    z = rlock.acquired()</span><br><span class="line">    print(<span class="string">f"current pid = <span class="subst">&#123;threading.current_thread()&#125;</span>"</span>)</span><br><span class="line">    print(<span class="string">"创建并启动一个worker线程"</span>)</span><br><span class="line">    t = threading.Thread(target=worker, args=(rlock,))</span><br><span class="line">    t.start()</span><br><span class="line">    print(<span class="string">"主线程开始获取RLock锁"</span>)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">5</span>):</span><br><span class="line">        rlock.acquired()</span><br><span class="line">    print(<span class="string">"主线程释放RLock锁"</span>)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">6</span>):</span><br><span class="line">        rlock.release()</span><br><span class="line">    print(<span class="string">"主线程释放完所有的RLock锁"</span>)</span><br></pre></td></tr></table></figure><p>测试代码使用两个线程，一个主线程，一个是 worker 线程。<br>运行结果如下：（实际结果可能有所出入，但是不影响实际请求流程）</p><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">生成一个R锁对象</span><br><span class="line">主线程获取RLock</span><br><span class="line">acquired count = <span class="number">1</span></span><br><span class="line">current pid = &lt;_MainThread(MainThread, started <span class="number">140736157979584</span>)&gt;</span><br><span class="line">创建并启动一个worker线程</span><br><span class="line">====非可重入锁所在线程释放RLock内部锁====</span><br><span class="line">主线程开始获取RLock锁</span><br><span class="line">acquired count = <span class="number">2</span></span><br><span class="line">acquired count = <span class="number">3</span></span><br><span class="line">acquired count = <span class="number">4</span></span><br><span class="line">acquired count = <span class="number">5</span></span><br><span class="line">acquired count = <span class="number">6</span></span><br><span class="line">主线程释放RLock锁</span><br><span class="line">release count = <span class="number">5</span></span><br><span class="line">release count = <span class="number">4</span></span><br><span class="line">release count = <span class="number">3</span></span><br><span class="line">release count = <span class="number">2</span></span><br><span class="line">current pid = &lt;Thread(Thread<span class="number">-1</span>, started <span class="number">123145446993920</span>)&gt;</span><br><span class="line">can not release the un-acquired the lock</span><br><span class="line">====非可重入锁所在线程释放RLock内部锁失败====</span><br><span class="line">waiting......</span><br><span class="line">release count = <span class="number">1</span></span><br><span class="line">release count = <span class="number">0</span></span><br><span class="line">主线程释放完所有的RLock锁</span><br><span class="line">acquired count = <span class="number">1</span></span><br><span class="line">RLock所在线程已释放所有锁，worker线程获取RLock内部锁成功</span><br></pre></td></tr></table></figure><p><script src="https://cdnjs.cloudflare.com/ajax/libs/raphael/2.2.7/raphael.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/flowchart/1.6.5/flowchart.min.js"></script><textarea id="flowchart-0-code" style="display: none">st=>start: 调用 acquiree1=>end: return 1e2=>end: return rcop1=>operation: 获取当前线程的pidcond1=>condition: 当前线程是否为RLock对象所属线程？op2=>operation: 计数器_count加1op3=>operation: 获取内部互斥锁cond2=>condition: 获取锁是否成功？op4=>operation: 将当前线程的pid赋给_owner，并将_count设置为1st->op1->cond1cond1(yes)->op2->e1cond1(no, left)->op3->cond2cond2(yes)->op4->e2cond2(no, left)->e2</textarea><textarea id="flowchart-0-options" style="display: none">{"scale":1,"line-width":2,"line-length":50,"text-margin":10,"font-size":12}</textarea><script>  var code = document.getElementById("flowchart-0-code").value;  var options = JSON.parse(decodeURIComponent(document.getElementById("flowchart-0-options").value));  var diagram = flowchart.parse(code);  diagram.drawSVG("flowchart-0", options);</script><textarea id="flowchart-1-code" style="display: none">st=>start: 调用 releasee1=>end: 抛出异常e2=>end: returnop1=>operation: 获取当前线程的pidcond1=>condition: 当前线程是否为RLock对象所属线程？op2=>operation: 计数器_count减1cond2=>condition: count是否为0？op3=>operation: _owner还原为None，并释放内部锁st->op1->cond1cond1(yes, left)->op2->cond2cond1(no)->e1cond2(yes)->op3->e2cond2(no)->e2</textarea><textarea id="flowchart-1-options" style="display: none">{"scale":1,"line-width":2,"line-length":50,"text-margin":10,"font-size":12}</textarea><script>  var code = document.getElementById("flowchart-1-code").value;  var options = JSON.parse(decodeURIComponent(document.getElementById("flowchart-1-options").value));  var diagram = flowchart.parse(code);  diagram.drawSVG("flowchart-1", options);</script></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;本文主要针对 Python 中的可重入锁 RLock 的源码剖析。&lt;/p&gt;
    
    </summary>
    
    
      <category term="Python" scheme="https://reishin.me/tags/Python/"/>
    
      <category term="源码" scheme="https://reishin.me/tags/%E6%BA%90%E7%A0%81/"/>
    
  </entry>
  
  <entry>
    <title>NexT 主题优化</title>
    <link href="https://reishin.me/hexo-next-optimization/"/>
    <id>https://reishin.me/hexo-next-optimization/</id>
    <published>2018-03-26T02:21:27.000Z</published>
    <updated>2018-09-10T12:29:51.000Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><p>为了能够让博客变得更加有特色，本文会教你如何对 Next 主题进行个性化的定制。</p><a id="more"></a><h2 id="元素微调自定义篇"><a href="#元素微调自定义篇" class="headerlink" title="元素微调自定义篇"></a>元素微调自定义篇</h2><h3 id="定位元素"><a href="#定位元素" class="headerlink" title="定位元素"></a>定位元素</h3><p>用谷歌或者火狐浏览器打开博客页面，按下F12进入调试<br>先点击定位按钮，然后选择元素，然后在定位出来的样式进行修改，调到自己喜欢的样子。</p><h3 id="有趣的样式"><a href="#有趣的样式" class="headerlink" title="有趣的样式"></a>有趣的样式</h3><p>在 <code>themes/next/source/css/_custom/custom.styl</code> 中添加以下样式：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">有趣的自定义样式</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">// 下载样式</span><br><span class="line"><span class="selector-tag">a</span><span class="selector-id">#download</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#000</span>;</span><br><span class="line">  <span class="attribute">background</span>: transparent;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">2px</span> solid <span class="number">#000</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">2px</span>;</span><br><span class="line">  <span class="attribute">transition</span>: all .<span class="number">5s</span> ease;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">  &amp;:hover &#123;</span><br><span class="line">    <span class="selector-tag">background</span>: <span class="selector-id">#000</span>;</span><br><span class="line">    <span class="selector-tag">color</span>: <span class="selector-id">#fff</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 颜色块-黄</span><br><span class="line"><span class="selector-tag">span</span><span class="selector-id">#inline-yellow</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: inline;</span><br><span class="line">  <span class="attribute">padding</span>: .<span class="number">2em</span> .<span class="number">6em</span> .<span class="number">3em</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">80%</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">  <span class="attribute">vertical-align</span>: baseline;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#f0ad4e</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 颜色块-绿</span><br><span class="line"><span class="selector-tag">span</span><span class="selector-id">#inline-green</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: inline;</span><br><span class="line">  <span class="attribute">padding</span>: .<span class="number">2em</span> .<span class="number">6em</span> .<span class="number">3em</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">80%</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">  <span class="attribute">vertical-align</span>: baseline;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#5cb85c</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 颜色块-蓝</span><br><span class="line"><span class="selector-tag">span</span><span class="selector-id">#inline-blue</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: inline;</span><br><span class="line">  <span class="attribute">padding</span>: .<span class="number">2em</span> .<span class="number">6em</span> .<span class="number">3em</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">80%</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">  <span class="attribute">vertical-align</span>: baseline;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#2780e3</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 颜色块-紫</span><br><span class="line"><span class="selector-tag">span</span><span class="selector-id">#inline-purple</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: inline;</span><br><span class="line">  <span class="attribute">padding</span>: .<span class="number">2em</span> .<span class="number">6em</span> .<span class="number">3em</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">80%</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">  <span class="attribute">vertical-align</span>: baseline;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#9954bb</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 左侧边框红色块级</span><br><span class="line"><span class="selector-tag">p</span><span class="selector-id">#div-border-left-red</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">10px</span> <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span><br><span class="line">  <span class="attribute">border-left-width</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span><br><span class="line">  <span class="attribute">border-left-color</span>: <span class="number">#df3e3e</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 左侧边框黄色块级</span><br><span class="line"><span class="selector-tag">p</span><span class="selector-id">#div-border-left-yellow</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">10px</span> <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span><br><span class="line">  <span class="attribute">border-left-width</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span><br><span class="line">  <span class="attribute">border-left-color</span>: <span class="number">#f0ad4e</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 左侧边框绿色块级</span><br><span class="line"><span class="selector-tag">p</span><span class="selector-id">#div-border-left-green</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">10px</span> <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span><br><span class="line">  <span class="attribute">border-left-width</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span><br><span class="line">  <span class="attribute">border-left-color</span>: <span class="number">#5cb85c</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 左侧边框蓝色块级</span><br><span class="line"><span class="selector-tag">p</span><span class="selector-id">#div-border-left-blue</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">10px</span> <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span><br><span class="line">  <span class="attribute">border-left-width</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span><br><span class="line">  <span class="attribute">border-left-color</span>: <span class="number">#2780e3</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 左侧边框紫色块级</span><br><span class="line"><span class="selector-tag">p</span><span class="selector-id">#div-border-left-purple</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">10px</span> <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span><br><span class="line">  <span class="attribute">border-left-width</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span><br><span class="line">  <span class="attribute">border-left-color</span>: <span class="number">#9954bb</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 右侧边框红色块级</span><br><span class="line"><span class="selector-tag">p</span><span class="selector-id">#div-border-right-red</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">10px</span> <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span><br><span class="line">  <span class="attribute">border-right-width</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span><br><span class="line">  <span class="attribute">border-right-color</span>: <span class="number">#df3e3e</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 右侧边框黄色块级</span><br><span class="line"><span class="selector-tag">p</span><span class="selector-id">#div-border-right-yellow</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">10px</span> <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span><br><span class="line">  <span class="attribute">border-right-width</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span><br><span class="line">  <span class="attribute">border-right-color</span>: <span class="number">#f0ad4e</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 右侧边框绿色块级</span><br><span class="line"><span class="selector-tag">p</span><span class="selector-id">#div-border-right-green</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">10px</span> <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span><br><span class="line">  <span class="attribute">border-right-width</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span><br><span class="line">  <span class="attribute">border-right-color</span>: <span class="number">#5cb85c</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 右侧边框蓝色块级</span><br><span class="line"><span class="selector-tag">p</span><span class="selector-id">#div-border-right-blue</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">10px</span> <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span><br><span class="line">  <span class="attribute">border-right-width</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span><br><span class="line">  <span class="attribute">border-right-color</span>: <span class="number">#2780e3</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 右侧边框紫色块级</span><br><span class="line"><span class="selector-tag">p</span><span class="selector-id">#div-border-right-purple</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">10px</span> <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span><br><span class="line">  <span class="attribute">border-right-width</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span><br><span class="line">  <span class="attribute">border-right-color</span>: <span class="number">#9954bb</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 上侧边框红色</span><br><span class="line"><span class="selector-tag">p</span><span class="selector-id">#div-border-top-red</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">10px</span> <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span><br><span class="line">  <span class="attribute">border-top-width</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span><br><span class="line">  <span class="attribute">border-top-color</span>: <span class="number">#df3e3e</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 上侧边框黄色</span><br><span class="line"><span class="selector-tag">p</span><span class="selector-id">#div-border-top-yellow</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">10px</span> <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span><br><span class="line">  <span class="attribute">border-top-width</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span><br><span class="line">  <span class="attribute">border-top-color</span>: <span class="number">#f0ad4e</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 上侧边框绿色</span><br><span class="line"><span class="selector-tag">p</span><span class="selector-id">#div-border-top-green</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">10px</span> <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span><br><span class="line">  <span class="attribute">border-top-width</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span><br><span class="line">  <span class="attribute">border-top-color</span>: <span class="number">#5cb85c</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 上侧边框蓝色</span><br><span class="line"><span class="selector-tag">p</span><span class="selector-id">#div-border-top-blue</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">10px</span> <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span><br><span class="line">  <span class="attribute">border-top-width</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span><br><span class="line">  <span class="attribute">border-top-color</span>: <span class="number">#2780e3</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 上侧边框紫色</span><br><span class="line"><span class="selector-tag">p</span><span class="selector-id">#div-border-top-purple</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">10px</span> <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span><br><span class="line">  <span class="attribute">border-top-width</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span><br><span class="line">  <span class="attribute">border-top-color</span>: <span class="number">#9954bb</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>用法如下：</p><h4 id="文字增加背景色块"><a href="#文字增加背景色块" class="headerlink" title="文字增加背景色块"></a>文字增加背景色块</h4><p><span id="inline-blue">站点配置文件</span>，<span id="inline-purple">主题配置文件</span></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"inline-blue"</span>&gt;</span>站点配置文件<span class="tag">&lt;/<span class="name">span</span>&gt;</span>，</span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"inline-purple"</span>&gt;</span>主题配置文件<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="引用边框变色"><a href="#引用边框变色" class="headerlink" title="引用边框变色"></a>引用边框变色</h4><p id="div-border-left-red">如果没有安装成功，那可能就是墙的原因。建议下载 <code>Node.js</code> 直接安装。</p><br><p id="div-border-top-blue">关于更多基本操作和基础知识，请查阅 <a href="https://hexo.io/zh-cn/" target="_blank" rel="noopener">Hexo</a> 与 <a href="http://theme-next.iissnan.com/" target="_blank" rel="noopener">NexT</a> 官方文档.</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"div-border-left-red"</span>&gt;</span></span>如果没有安装成功，那可能就是墙的原因。建议下载 <span class="code">`Node.js`</span> 直接安装。<span class="xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"div-border-top-blue"</span>&gt;</span></span>关于更多基本操作和基础知识，请查阅 [<span class="string">Hexo</span>](<span class="link">https://hexo.io/zh-cn/</span>) 与 [<span class="string">NexT</span>](<span class="link">http://theme-next.iissnan.com/</span>) 官方文档.<span class="xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h4 id="在文档中增加图标"><a href="#在文档中增加图标" class="headerlink" title="在文档中增加图标"></a>在文档中增加图标</h4><ul><li><i class="fa fa-pencil"></i>支持Markdown<br><i>Hexo 支持 GitHub Flavored Markdown 的所有功能，甚至可以整合 Octopress 的大多数插件。</i></li><li><i class="fa fa-cloud-upload"></i>一件部署<br><i>只需一条指令即可部署到Github Pages，或其他网站</i></li><li><i class="fa fa-cog"></i>丰富的插件<br><i>Hexo 拥有强大的插件系统，安装插件可以让 Hexo 支持 Jade, CoffeeScript。</i></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">* <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"fa fa-pencil"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span>支持Markdown</span><br><span class="line"><span class="tag">&lt;<span class="name">i</span>&gt;</span>Hexo 支持 GitHub Flavored Markdown 的所有功能，甚至可以整合 Octopress 的大多数插件。<span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">* <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"fa fa-cloud-upload"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span>一件部署</span><br><span class="line"><span class="tag">&lt;<span class="name">i</span>&gt;</span>只需一条指令即可部署到Github Pages，或其他网站<span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">* <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"fa fa-cog"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span>丰富的插件</span><br><span class="line"><span class="tag">&lt;<span class="name">i</span>&gt;</span>Hexo 拥有强大的插件系统，安装插件可以让 Hexo 支持 Jade, CoffeeScript。<span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br></pre></td></tr></table></figure><p>更多示例</p><p><i class="fa fa-github"></i> <code>&lt;i class=&quot;fa fa-github&quot;&gt;&lt;/i&gt;</code><br><i class="fa fa-github fa-lg"></i> <code>&lt;i class=&quot;fa fa-github fa-lg&quot;&gt;&lt;/i&gt;</code><br><i class="fa fa-github fa-2x"></i> <code>&lt;i class=&quot;fa fa-github fa-2x&quot;&gt;&lt;/i&gt;</code></p><p>采用的是<a href="http://fontawesome.io/examples/" target="_blank" rel="noopener">Font Awesome</a>的图标。</p><h4 id="图形边框效果"><a href="#图形边框效果" class="headerlink" title="图形边框效果"></a>图形边框效果</h4><p>自定义效果：<a id="download" href="#"><i class="fa fa-download"></i><span> Download Now</span></a></p><figure class="highlight plain"><figcaption><span>源码</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;a id=&quot;download&quot; href=&quot;#&quot;&gt;&lt;i class=&quot;fa fa-download&quot;&gt;&lt;/i&gt;&lt;span&gt; Download Now&lt;/span&gt;</span><br><span class="line">&lt;/a&gt;</span><br></pre></td></tr></table></figure><p>主题自带效果：<a class="btn" href="https://reishin.me"><i class="fa fa-home fa-fw"></i>点击访问博客</a></p><figure class="highlight plain"><figcaption><span>源码</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% btn https://reishin.me, 点击访问博客, home fa-fw %&#125;</span><br></pre></td></tr></table></figure><p id="div-border-left-green">更多使用方法参考<a href="https://almostover.ru/2016-01/hexo-theme-next-test/#Button-tag-test" target="_blank" rel="noopener">该页面</a>。</p><h3 id="代码块样式"><a href="#代码块样式" class="headerlink" title="代码块样式"></a>代码块样式</h3><p>效果：</p><figure class="highlight python"><figcaption><span>Python</span><a href="http://github.com/cxyfreedom" target="_blank" rel="noopener">Github</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="string">"Hello, NexT"</span>)</span><br></pre></td></tr></table></figure><p>用法：</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">```<span class="string">[language]</span> <span class="string">[title]</span> <span class="string">[url]</span> <span class="string">[link-text]</span></span><br><span class="line">code</span><br></pre></td></tr></table></figure><ul><li>[language] 是代码语言的名称，用来设置代码块颜色高亮，非必须；</li><li>[title] 是顶部左边的说明，非必须；</li><li>[url] 是顶部右边的超链接地址，非必须；</li><li>[link text] 如它的字面意思，超链接的名称，非必须。</li></ul><p>修改代码块 diff 的颜色方式为 GitHub 的样式。主题默认的是 <code>-</code> 是绿色，<code>+</code> 是红色。</p><figure class="highlight css"><figcaption><span>文件位置：themes/next/source/css/_custom/custom.styl</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// 文章```代码块diff样式</span><br><span class="line"><span class="selector-tag">pre</span> <span class="selector-class">.addition</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#e6ffed</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">pre</span> <span class="selector-class">.deletion</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#ffeef0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>代码高亮的语言名称可以参考<a href="https://almostover.ru/2016-07/hexo-highlight-code-styles/" target="_blank" rel="noopener">这篇文章</a></p><p id="div-border-left-green">如关于代码块高亮的高级个性化，参考<a href="https://zhuzhuyule.com/blog/HEXO/HEXO%E4%B8%8B%E7%9A%84%E8%AF%AD%E6%B3%95%E9%AB%98%E4%BA%AE%E6%8B%93%E5%B1%95%E4%BF%AE%E6%94%B9.html" target="_blank" rel="noopener">HEXO下的语法高亮拓展修改</a></p><h3 id="文本居中引用"><a href="#文本居中引用" class="headerlink" title="文本居中引用"></a>文本居中引用</h3><p>效果：</p><blockquote class="blockquote-center"><p>居中引用</p></blockquote><figure class="highlight plain"><figcaption><span>源码</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% cq %&#125;</span><br><span class="line">居中引用</span><br><span class="line">&#123;% endcq %&#125;</span><br></pre></td></tr></table></figure><p id="div-border-left-green"><a href="http://theme-next.iissnan.com/tag-plugins.html" target="_blank" rel="noopener">更多 NexT 主题自带的标签样式</a></p><h3 id="主题自带的-note-标签"><a href="#主题自带的-note-标签" class="headerlink" title="主题自带的 note 标签"></a>主题自带的 note 标签</h3><div class="note default"><p>default</p></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"note default"</span>&gt;<span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>default<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure><div class="note primary"><p>primary</p></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"note primary"</span>&gt;<span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>primary<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure><div class="note success"><p>success</p></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"note success"</span>&gt;<span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>success<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure><div class="note info"><p>info</p></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"note info"</span>&gt;<span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>info<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure><div class="note warning"><p>warning</p></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"note warning"</span>&gt;<span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>warning<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure><div class="note danger"><p>danger</p></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"note danger"</span>&gt;<span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>danger<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure><div class="note danger no-icon"><p>danger no-icon</p></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"note danger no-icon"</span>&gt;<span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>danger no-icon<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p id="div-border-left-green"><a href="https://github.com/iissnan/hexo-theme-next/pull/1697" target="_blank" rel="noopener">具体的风格查看该页面</a></p><h3 id="主题自带的-tabs-标签"><a href="#主题自带的-tabs-标签" class="headerlink" title="主题自带的 tabs 标签"></a>主题自带的 tabs 标签</h3><div class="tabs" id="选项卡"><ul class="nav-tabs"><li class="tab"><a href="#选项卡-1">选项卡 1</a></li><li class="tab active"><a href="#选项卡-2">选项卡 2</a></li><li class="tab"><a href="#选项卡-3">选项卡 3</a></li></ul><div class="tab-content"><div class="tab-pane" id="选项卡-1"><p><strong>这是选项卡 1</strong></p></div><div class="tab-pane active" id="选项卡-2"><p><strong>这是选项卡 2</strong></p></div><div class="tab-pane" id="选项卡-3"><p><strong>这是选项卡 3</strong></p></div></div></div><figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"></span><span class="template-tag">&#123;% <span class="name">tabs</span> 选项卡, 2 %&#125;</span><span class="xml"></span></span><br><span class="line"><span class="xml"><span class="comment">&lt;!-- tab --&gt;</span></span></span><br><span class="line"><span class="xml">**这是选项卡 1**</span></span><br><span class="line"><span class="xml"><span class="comment">&lt;!-- endtab --&gt;</span></span></span><br><span class="line"><span class="xml"><span class="comment">&lt;!-- tab --&gt;</span></span></span><br><span class="line"><span class="xml">**这是选项卡 2**</span></span><br><span class="line"><span class="xml"><span class="comment">&lt;!-- endtab --&gt;</span></span></span><br><span class="line"><span class="xml"><span class="comment">&lt;!-- tab --&gt;</span></span></span><br><span class="line"><span class="xml">**这是选项卡 3**</span></span><br><span class="line"><span class="xml"><span class="comment">&lt;!-- endtab --&gt;</span></span></span><br><span class="line"><span class="xml"></span><span class="template-tag">&#123;% <span class="name">endtabs</span> %&#125;</span><span class="xml"></span></span><br></pre></td></tr></table></figure><h3 id="插入音乐和视频"><a href="#插入音乐和视频" class="headerlink" title="插入音乐和视频"></a>插入音乐和视频</h3><p>音乐</p>    <div id="aplayer-ffKDYGIH" class="aplayer aplayer-tag-marker meting-tag-marker" data-id="421137682" data-server="netease" data-type="song" data-mode="circulation" data-autoplay="false" data-mutex="true" data-listmaxheight="340px" data-preload="auto" data-theme="#ad7a86"></div><figure class="highlight plain"><figcaption><span>安装</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-tag-aplayer --save</span><br></pre></td></tr></table></figure><figure class="highlight plain"><figcaption><span>写法</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% meting &quot;421137682&quot; &quot;netease&quot; &quot;song&quot; %&#125;</span><br></pre></td></tr></table></figure><p id="div-border-left-green">具体使用方法参考 <a href="https://github.com/MoePlayer/hexo-tag-aplayer/blob/master/docs/README-zh_cn.md" target="_blank" rel="noopener">hexo-tag-aplayer</a> 或者 <a href="https://aplayer.js.org/#/zh-Hans/" target="_blank" rel="noopener">官方文档</a></p><p>视频</p><div id="dplayer0" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer0"),"video":{"url":"http://p64urweu3.bkt.clouddn.com/%E4%B8%8D%E8%80%81%E6%A2%A6.mp4"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script><figure class="highlight plain"><figcaption><span>安装</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-tag-dplayer --save</span><br></pre></td></tr></table></figure><p id="div-border-left-green">具体使用方法参考 <a href="https://github.com/MoePlayer/hexo-tag-dplayer" target="_blank" rel="noopener">hexo-tag-dplayer</a> 或者 <a href="https://dplayer.js.org/#/zh-Hans/" target="_blank" rel="noopener">官方文档</a></p><h2 id="插件汇总"><a href="#插件汇总" class="headerlink" title="插件汇总"></a>插件汇总</h2><h3 id="字数与阅读时间插件"><a href="#字数与阅读时间插件" class="headerlink" title="字数与阅读时间插件"></a>字数与阅读时间插件</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-symbols-count-time --save</span><br></pre></td></tr></table></figure><h3 id="部署插件"><a href="#部署插件" class="headerlink" title="部署插件"></a>部署插件</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure><h3 id="分享插件"><a href="#分享插件" class="headerlink" title="分享插件"></a>分享插件</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/theme-next/theme-next-needmoreshare2 <span class="built_in">source</span>/lib/needsharebutton</span><br></pre></td></tr></table></figure><h3 id="RSS插件"><a href="#RSS插件" class="headerlink" title="RSS插件"></a>RSS插件</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-feed --save</span><br></pre></td></tr></table></figure><h3 id="百度主动推送插件"><a href="#百度主动推送插件" class="headerlink" title="百度主动推送插件"></a>百度主动推送插件</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-baidu-url-submit --save</span><br></pre></td></tr></table></figure><h3 id="sitemap"><a href="#sitemap" class="headerlink" title="sitemap"></a>sitemap</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-sitemap --save</span><br><span class="line">npm install hexo-generator-baidu-sitemap --save</span><br></pre></td></tr></table></figure><h3 id="动画效果插件"><a href="#动画效果插件" class="headerlink" title="动画效果插件"></a>动画效果插件</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/theme-next/theme-next-three <span class="built_in">source</span>/lib/three</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/theme-next/theme-next-pace <span class="built_in">source</span>/lib/pace</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/theme-next/theme-next-canvas-nest <span class="built_in">source</span>/lib/canvas-nest</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/theme-next/theme-next-canvas-ribbon <span class="built_in">source</span>/lib/canvas-ribbon</span><br></pre></td></tr></table></figure><h3 id="萌宠插件"><a href="#萌宠插件" class="headerlink" title="萌宠插件"></a>萌宠插件</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-helper-live2d@2.1.5 --save</span><br></pre></td></tr></table></figure><p>然后在 <code>/next/layout/_layout.swig</code> 的 <code>&lt;/body&gt;</code> 之前加入</p><figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123; live2d() &#125;&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><figcaption><span>_config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">live2d:</span><br><span class="line">  model: koharu</span><br><span class="line">  position: left</span><br><span class="line">  opacityDefault: 1</span><br></pre></td></tr></table></figure><p id="div-border-left-green"><a href="https://huaji8.top/post/live2d-plugin-2.0/" target="_blank" rel="noopener">hexo live2d插件 2.0</a><br><a href="https://github.com/EYHN/hexo-helper-live2d" target="_blank" rel="noopener">官方文档</a><br></p><h2 id="进阶功能配置"><a href="#进阶功能配置" class="headerlink" title="进阶功能配置"></a>进阶功能配置</h2><h3 id="时间轴年份分隔"><a href="#时间轴年份分隔" class="headerlink" title="时间轴年份分隔"></a>时间轴年份分隔</h3><p>默认只有归档页面的文章之间有年份分隔，如果希望 category 和 tag 页面也有类似的效果，可以修改对应文件即可。</p><p><strong>具体实现方法</strong></p><p>这里用 category 做示范<br><figure class="highlight plain"><figcaption><span>文件位置：themes/next/layout/category.swig</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">    &#123;% for post in page.posts %&#125;</span><br><span class="line">              &#123;&#123;位置A&#125;&#125;</span><br><span class="line">      &#123;&#123; post_template.render(post) &#125;&#125;</span><br><span class="line">    &#123;% endfor %&#125;</span><br><span class="line"></span><br><span class="line">// 最后</span><br><span class="line">&#123;&#123;位置B&#125;&#125;</span><br></pre></td></tr></table></figure></p><p>在对应位置添加对应的代码就可以实现分隔：<br><figure class="highlight plain"><figcaption><span>文件位置：themes/next/layout/category.swig</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">      &#123;% for post in page.posts %&#125;</span><br><span class="line"></span><br><span class="line">        &#123;# Show year #&#125;</span><br><span class="line">        &#123;% set year %&#125;</span><br><span class="line">        &#123;% set post.year = date(post.date, &apos;YYYY&apos;) %&#125;</span><br><span class="line"></span><br><span class="line">        &#123;% if post.year !== year %&#125;</span><br><span class="line">          &#123;% set year = post.year %&#125;</span><br><span class="line">          &lt;div class=&quot;collection-title&quot;&gt;</span><br><span class="line">            &lt;h2 class=&quot;archive-year motion-element&quot; id=&quot;archive-year-&#123;&#123; year &#125;&#125;&quot;&gt;&#123;&#123; year &#125;&#125;&lt;/h2&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &#123;% endif %&#125;</span><br><span class="line">        &#123;# endshow #&#125;</span><br><span class="line"></span><br><span class="line">        &#123;&#123; post_template.render(post) &#125;&#125;</span><br><span class="line">      &#123;% endfor %&#125;</span><br><span class="line"></span><br><span class="line">// 最后</span><br><span class="line">&#123;% block script_extra %&#125;</span><br><span class="line">  &#123;% if theme.use_motion %&#125;</span><br><span class="line">    &lt;script type=&quot;text/javascript&quot; id=&quot;motion.page.archive&quot;&gt;</span><br><span class="line">      $(&apos;.archive-year&apos;).velocity(&apos;transition.slideLeftIn&apos;);</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">  &#123;% endif %&#125;</span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure></p><p>tag 的文件位置在 <code>themes/next/layout/tag.swig</code></p><h3 id="页面底部添加博客运行时间"><a href="#页面底部添加博客运行时间" class="headerlink" title="页面底部添加博客运行时间"></a>页面底部添加博客运行时间</h3><p><strong>具体实现方法</strong></p><figure class="highlight plain"><figcaption><span>文件位置：themes/next/layout/_partials/footer.swig</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;span class=&quot;footer__copyright&quot;&gt;</span><br><span class="line">&lt;div&gt;&lt;span id=&quot;span_dt_dt&quot;&gt; &lt;/span&gt;</span><br><span class="line">&lt;script language=&quot;javascript&quot;&gt;</span><br><span class="line">function show_date_time()&#123;</span><br><span class="line">window.setTimeout(&quot;show_date_time()&quot;, 1000);</span><br><span class="line">BirthDay=new Date(&quot;8/25/2016 00:00:00&quot;);//这个日期是可以修改的</span><br><span class="line">today=new Date();</span><br><span class="line">timeold=(today.getTime()-BirthDay.getTime());//其实仅仅改了这里</span><br><span class="line">sectimeold=timeold/1000</span><br><span class="line">secondsold=Math.floor(sectimeold);</span><br><span class="line">msPerDay=24*60*60*1000</span><br><span class="line">e_daysold=timeold/msPerDay</span><br><span class="line">daysold=Math.floor(e_daysold);</span><br><span class="line">e_hrsold=(e_daysold-daysold)*24;</span><br><span class="line">hrsold=Math.floor(e_hrsold);</span><br><span class="line">e_minsold=(e_hrsold-hrsold)*60;</span><br><span class="line">minsold=Math.floor((e_hrsold-hrsold)*60);</span><br><span class="line">seconds=Math.floor((e_minsold-minsold)*60);</span><br><span class="line">span_dt_dt.innerHTML=&quot;博客已萌萌哒运行&quot;+daysold+&quot;天&quot;+hrsold+&quot;小时&quot;+minsold+&quot;分&quot;+seconds+&quot;秒 🐼 &quot;;</span><br><span class="line">&#125;</span><br><span class="line">show_date_time();</span><br><span class="line">&lt;/script&gt;&lt;/div&gt;</span><br><span class="line">&lt;/span&gt;</span><br></pre></td></tr></table></figure><h3 id="博文压缩"><a href="#博文压缩" class="headerlink" title="博文压缩"></a>博文压缩</h3><p><strong>具体实现方法</strong></p><p>在站点的根目录下执行以下命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> npm install gulp -g</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> npm install gulp-minify-css gulp-uglify gulp-htmlmin gulp-htmlclean gulp --save</span></span><br></pre></td></tr></table></figure><p>然后在站点根目录下新建 <code>gulpfile.js</code>，并添加以下内容</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>);</span><br><span class="line"><span class="keyword">var</span> minifycss = <span class="built_in">require</span>(<span class="string">'gulp-minify-css'</span>);</span><br><span class="line"><span class="keyword">var</span> uglify = <span class="built_in">require</span>(<span class="string">'gulp-uglify'</span>);</span><br><span class="line"><span class="keyword">var</span> htmlmin = <span class="built_in">require</span>(<span class="string">'gulp-htmlmin'</span>);</span><br><span class="line"><span class="keyword">var</span> htmlclean = <span class="built_in">require</span>(<span class="string">'gulp-htmlclean'</span>);</span><br><span class="line"><span class="comment">// 压缩 public 目录 css</span></span><br><span class="line">gulp.task(<span class="string">'minify-css'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> gulp.src(<span class="string">'./public/**/*.css'</span>)</span><br><span class="line">        .pipe(minifycss())</span><br><span class="line">        .pipe(gulp.dest(<span class="string">'./public'</span>));</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 压缩 public 目录 html</span></span><br><span class="line">gulp.task(<span class="string">'minify-html'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> gulp.src(<span class="string">'./public/**/*.html'</span>)</span><br><span class="line">    .pipe(htmlclean())</span><br><span class="line">    .pipe(htmlmin(&#123;</span><br><span class="line">         removeComments: <span class="literal">true</span>,</span><br><span class="line">         minifyJS: <span class="literal">true</span>,</span><br><span class="line">         minifyCSS: <span class="literal">true</span>,</span><br><span class="line">         minifyURLs: <span class="literal">true</span>,</span><br><span class="line">    &#125;))</span><br><span class="line">    .pipe(gulp.dest(<span class="string">'./public'</span>))</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 压缩 public/js 目录 js</span></span><br><span class="line">gulp.task(<span class="string">'minify-js'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> gulp.src(<span class="string">'./public/**/*.js'</span>)</span><br><span class="line">        .pipe(uglify())</span><br><span class="line">        .pipe(gulp.dest(<span class="string">'./public'</span>));</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 执行 gulp 命令时执行的任务</span></span><br><span class="line">gulp.task(<span class="string">'default'</span>, [</span><br><span class="line">    <span class="string">'minify-html'</span>,<span class="string">'minify-css'</span>,<span class="string">'minify-js'</span></span><br><span class="line">]);</span><br></pre></td></tr></table></figure><p>生成文章时执行 <code>hexo g &amp;&amp; gulp</code></p><h2 id="写作篇"><a href="#写作篇" class="headerlink" title="写作篇"></a>写作篇</h2><h3 id="新建文章"><a href="#新建文章" class="headerlink" title="新建文章"></a>新建文章</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new post &lt;title&gt;</span><br></pre></td></tr></table></figure><h3 id="使用-Markdown"><a href="#使用-Markdown" class="headerlink" title="使用 Markdown"></a>使用 Markdown</h3><h4 id="教程"><a href="#教程" class="headerlink" title="教程"></a>教程</h4><p><a href="https://zhuzhuyule.com/2017/01/10/Hexo%E4%B8%8B%E7%9A%84Markdown%E8%AF%AD%E6%B3%95%28GFM%29%E5%86%99%E5%8D%9A%E5%AE%A2/" target="_blank" rel="noopener">HEXO下的Markdown语法(GFM)写博客</a></p><h2 id="主题升级备份"><a href="#主题升级备份" class="headerlink" title="主题升级备份"></a>主题升级备份</h2><p>NexT作者给我们的建议就是使用 <a href="https://hexo.io/zh-cn/docs/data-files.html" target="_blank" rel="noopener">Data Files</a>，具体详情看 <a href="https://github.com/theme-next/hexo-theme-next/blob/master/docs/zh-CN/DATA-FILES.md" target="_blank" rel="noopener">官方使用说明</a></p><p><strong>使用NexT方式</strong></p><p>使用这一方式，你现在可以将你的全部配置置于同一位置（<code>source/_data/next.yml</code>），并且不需要修改 <code>next/_config.yml</code>。 但是可能无法让所有 Hexo 外部库都准确处理它们的附加选项（举个例子，<code>hexo-server</code> 模块只会从 Hexo 默认配置文件中读取选项）。</p><p><strong>用法</strong></p><ol><li>请确认你的 Hexo 版本为 3.0 或更高。</li><li>在你站点的 <code>hexo/source/_data</code> 目录创建一个 <code>next.yml</code> 文件（如果 <code>_data</code> 目录不存在，请创建之）。</li></ol><p align="center">以上步骤之后有 <b>两种选择</b>，请<b>任选其一</b>然后<b>继续后面的步骤</b>。</p><ul><li><p><strong>选择 1：<code>override: false</code>（默认）</strong>：</p><ol><li>检查默认 NexT 配置中的 <code>override</code> 选项，必须设置为 <code>false</code>。\<br>在 <code>next.yml</code> 文件中，也要设置为 <code>false</code>，或者不定义此选项。</li><li>从站点的 <code>_config.yml</code> 与主题的 <code>_config.yml</code> 中复制你需要的选项到 <code>hexo/source/_data/next.yml</code> 中。</li></ol></li><li><p><strong>选择 2：<code>override: true</code></strong>：</p><ol><li>在 <code>next.yml</code> 中设置 <code>override</code> 选项为 <code>true</code>。</li><li>从 <code>next/_config.yml</code> 配置文件中复制<strong>所有</strong>的 NexT 主题选项到 <code>hexo/source/_data/next.yml</code> 中。</li></ol></li></ul><ol start="3"><li>然后，在站点的 <code>hexo/_config.yml</code>中需要定义 <code>theme: next</code> 选项（如果需要的话，<code>source_dir: source</code>）。</li><li>使用标准参数来启动服务器，生成或部署（<code>hexo clean &amp;&amp; hexo g -d &amp;&amp; hexo s</code>）。</li></ol><h2 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h2><ul><li><a href="http://shenzekun.cn/hexo%E7%9A%84next%E4%B8%BB%E9%A2%98%E4%B8%AA%E6%80%A7%E5%8C%96%E9%85%8D%E7%BD%AE%E6%95%99%E7%A8%8B.html" target="_blank" rel="noopener">hexo的next主题个性化教程:打造炫酷网站</a></li><li><a href="https://rongxuanhong.github.io/2017/05/13/Hexo%E4%B8%8EDisqus%E5%BC%95%E5%85%A5%E7%9A%84%E6%95%85%E4%BA%8B/" target="_blank" rel="noopener">Hexo与Disqus引入的故事</a></li><li><a href="https://chalkit.tk/20171123-load-Disqus-livere-comment-on-click-in-hexo-next-theme/" target="_blank" rel="noopener">Hexo Next 主题点击加载 Disqus 和来必力双评论系统</a></li><li><a href="http://cherryblog.site/Hexo-high-level-tutorialcloudmusic,bg-customthemes-statistical.html" target="_blank" rel="noopener">【高阶】NexT 主题优化之加入网易云音乐、网易云跟帖、动态背景、自定义主题、统计功能</a></li><li><a href="http://blog.ynxiu.com/2016/hexo-next-theme-optimize.html" target="_blank" rel="noopener">Hexo+NexT 主题配置备忘</a></li><li><a href="https://neveryu.github.io/2016/09/30/hexo-next-two/" target="_blank" rel="noopener">Hexo-NexT搭建个人博客（二）</a></li><li><a href="http://yangbingdong.com/2017/build-blog-hexo-advanced/" target="_blank" rel="noopener">基于Hexo搭建个人博客——进阶篇(从入门到入土)</a></li><li><a href="https://reuixiy.github.io/technology/computer/computer-aided-art/2017/06/09/hexo-next-optimization.html" target="_blank" rel="noopener">打造个性超赞博客Hexo+NexT+GithubPages的超深度优化</a></li><li><a href="https://www.webpagefx.com/tools/emoji-cheat-sheet/" target="_blank" rel="noopener">EMOJI CHEAT SHEET</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;为了能够让博客变得更加有特色，本文会教你如何对 Next 主题进行个性化的定制。&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>GitHub Pages 启用 SSL/TLS</title>
    <link href="https://reishin.me/Hexo-with-SSL-hosted-on-GitHub-Pages/"/>
    <id>https://reishin.me/Hexo-with-SSL-hosted-on-GitHub-Pages/</id>
    <published>2016-08-24T19:14:00.000Z</published>
    <updated>2018-09-10T12:29:47.000Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><p>通过本文，可以让 GitHub Pages 从 http 转变为 https，从而让数据更加安全。</p><a id="more"></a><h2 id="注册-CloudFlare"><a href="#注册-CloudFlare" class="headerlink" title="注册 CloudFlare"></a>注册 CloudFlare</h2><p>注册 CloudFlare 后，按照提示在 Add Websites 中添加自己网站的域名，然后点击 <code>Begin Scan</code></p><p>通常情况一路默认即可。最后，CloudFlare 会分配两个 <code>NameServer</code> ，比如：</p><blockquote><p>*.ns.cloudflare.com</p><p>*.ns.cloudflare.com</p></blockquote><h2 id="修改域名服务商的-NameServer"><a href="#修改域名服务商的-NameServer" class="headerlink" title="修改域名服务商的 NameServer"></a>修改域名服务商的 NameServer</h2><p>理论上可以添加多个 <code>NameServer</code>，但混用多个可能会导致一些问题，所以建议直接将原有的 NS 替换</p><p>为 CloudFlare 提供的 NS。例如 <code>f1g1ns1.dnspod.net</code> 和 <code>f1g1ns2.dnspod.net</code>。添加完毕后，等待</p><p>片刻，在 CloudFlare 中点击 <code>Recheck Nameservers</code>，如果激活成功，会提示 <code>Status: Active</code>。</p><p>到此为止，已经可以用 <code>https</code> 来访问你的网站。</p><h2 id="强制网页跳转-HTTPS"><a href="#强制网页跳转-HTTPS" class="headerlink" title="强制网页跳转 HTTPS"></a>强制网页跳转 HTTPS</h2><p>现在我们需要手动在地址栏输入 <code>https</code> 才能访问我们加密的网站。为了能够访问网站的任何一个页面</p><p>时，都能够以加密方式进行访问，最为便捷的方式就是使用 CloudFlare 提供的 <code>Page Rules</code>。设置规</p><p>则类似于如下：</p><img src="/Hexo-with-SSL-hosted-on-GitHub-Pages/rules.png"><h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul><li><a href="https://g2ex.github.io/2015/10/14/Hexo-with-SSL-Hosted-on-Github-Page/" target="_blank" rel="noopener">为 Github的 Hexo 博客启用 SSL/TLS</a></li><li><a href="https://blog.chionlab.moe/2016/01/28/github-pages-with-https/" target="_blank" rel="noopener">在 GitHub Pages上使用 CloudFlare https CDN</a></li><li><a href="http://wangye.org/blog/archives/196/" target="_blank" rel="noopener">再谈域名 DNS 服务器不能混用多个 NS 的问题</a></li><li><a href="https://www.cloudflare.com" target="_blank" rel="noopener">CloudFlare</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;通过本文，可以让 GitHub Pages 从 http 转变为 https，从而让数据更加安全。&lt;/p&gt;
    
    </summary>
    
    
      <category term="SSL" scheme="https://reishin.me/tags/SSL/"/>
    
      <category term="GitHub" scheme="https://reishin.me/tags/GitHub/"/>
    
  </entry>
  
  <entry>
    <title>利用 Hexo + GitHub 搭建个人博客</title>
    <link href="https://reishin.me/%E5%88%A9%E7%94%A8Hexo-GitHub%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/"/>
    <id>https://reishin.me/利用Hexo-GitHub搭建个人博客/</id>
    <published>2015-11-06T07:35:56.000Z</published>
    <updated>2018-09-10T12:28:47.000Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>网上看到各式各样的博客，因此，自己也想拥有一个属于自己的独立博客。利用搜索引擎，最终选择了 Hexo + Github 的方式来搭建一个静态博客。搭建完成后，决定把自己从开始到搭建完成的整个过程给记录下来，也可以给以后搭建博客的人一个参考。<br><a id="more"></a></p><h2 id="安装前提"><a href="#安装前提" class="headerlink" title="安装前提"></a>安装前提</h2><ul><li><a href="http://git-scm.com/" target="_blank" rel="noopener">Git</a></li><li><a href="https://nodejs.org/en/" target="_blank" rel="noopener">Node.js</a></li></ul><p>我是在Ubuntu平台上搭建的，所以就以Ubuntu下为例：</p><h3 id="安装-Git"><a href="#安装-Git" class="headerlink" title="安装 Git"></a>安装 Git</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo apt-get install git-core</span></span><br></pre></td></tr></table></figure><h3 id="安装-Node-js"><a href="#安装-Node-js" class="headerlink" title="安装 Node.js"></a>安装 Node.js</h3><ul><li>脚本安装</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.31.2/install.sh | bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> or</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> wget -qO- https://raw.githubusercontent.com/creationix/nvm/v0.31.2/install.sh | bash</span></span><br></pre></td></tr></table></figure><ul><li>手动安装</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">export NVM_DIR="$HOME/.nvm" &amp;&amp; (</span><br><span class="line">  git clone https://github.com/creationix/nvm.git "$NVM_DIR"</span><br><span class="line">  cd "$NVM_DIR"</span><br><span class="line">  git checkout `git describe --abbrev=0 --tags --match "v[0-9]*" origin`</span><br><span class="line">) &amp;&amp; . "$NVM_DIR/nvm.sh"</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 添加以下内容到~/.bashrc或者~/.profile或者~/.zshrc</span></span><br><span class="line">export NVM_DIR="$HOME/.nvm"</span><br><span class="line">[ -s "$NVM_DIR/nvm.sh" ] &amp;&amp; . "$NVM_DIR/nvm.sh" # This loads nvm</span><br></pre></td></tr></table></figure><p>安装完毕后，重启终端，然后执行以下命令<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ nvm install v6.2.2</span><br><span class="line">$ nvm alias<span class="built_in"> default </span>v6.2.2</span><br></pre></td></tr></table></figure></p><h2 id="开始搭建博客"><a href="#开始搭建博客" class="headerlink" title="开始搭建博客"></a>开始搭建博客</h2><h3 id="安装-Hexo"><a href="#安装-Hexo" class="headerlink" title="安装 Hexo"></a>安装 Hexo</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> npm install -g hexo-cli</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> npm install hexo --save</span></span><br></pre></td></tr></table></figure><p>如果上述命令无法安装，可以将官方源替换成<a href="https://npm.taobao.org/" target="_blank" rel="noopener">淘宝npm源</a><br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> npm install -g cnpm --registry=https://registry.npm.taobao.org</span></span><br></pre></td></tr></table></figure></p><p>查看 Hexo 版本<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> hexo version</span></span><br><span class="line">hexo: 3.2.2</span><br><span class="line">hexo-cli: 1.0.2</span><br><span class="line">os: Linux 3.13.0-32-generic linux ia32</span><br><span class="line">http_parser: 2.7.0</span><br><span class="line">node: 6.2.2</span><br><span class="line">v8: 5.0.71.52</span><br><span class="line">uv: 1.9.1</span><br><span class="line">zlib: 1.2.8</span><br><span class="line">ares: 1.10.1-DEV</span><br><span class="line">icu: 57.1</span><br><span class="line">modules: 48</span><br><span class="line">openssl: 1.0.2h</span><br></pre></td></tr></table></figure></p><h3 id="配置-Hexo"><a href="#配置-Hexo" class="headerlink" title="配置 Hexo"></a>配置 Hexo</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> hexo init &lt;folder&gt;</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> &lt;folder&gt;</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo npm install</span></span><br></pre></td></tr></table></figure><h3 id="部署-Hexo"><a href="#部署-Hexo" class="headerlink" title="部署 Hexo"></a>部署 Hexo</h3><p>执行以下命令，启动本地服务器。然后在浏览器中输入 <a href="http://localhost:4000" target="_blank" rel="noopener">http://localhost:4000</a> 即可访问<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> hexo s    <span class="comment">#启动本地服务器</span></span></span><br></pre></td></tr></table></figure></p><h2 id="博客部署到-GitHub"><a href="#博客部署到-GitHub" class="headerlink" title="博客部署到 GitHub"></a>博客部署到 GitHub</h2><h3 id="新建一个博客的项目仓库"><a href="#新建一个博客的项目仓库" class="headerlink" title="新建一个博客的项目仓库"></a>新建一个博客的项目仓库</h3><p><code>Repository name</code> 为<code>your_github_name.github.io</code></p><h3 id="配置本地的-SSH-KEY-到-GitHub"><a href="#配置本地的-SSH-KEY-到-GitHub" class="headerlink" title="配置本地的 SSH KEY 到 GitHub"></a>配置本地的 SSH KEY 到 GitHub</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> ssh-keygen -t rsa -C <span class="string">"your email address"</span> <span class="comment"># 默认生成的文件名为id_rsa和id_rsa.pub</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> or</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ssh-keygen -t ras -C <span class="string">"your email address"</span> -f <span class="string">"file_name"</span> <span class="comment"># 生成的文件名就为file_name和file_name.pub</span></span></span><br></pre></td></tr></table></figure><p>然后在GitHub上新建一个SSH KEYS，把 *.pub 的内容拷贝进去。可以使用以下命令来测试是否设置成功<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> ssh -T git@github.com</span></span><br></pre></td></tr></table></figure></p><h3 id="把本地-Hexo-部署到-GitHub"><a href="#把本地-Hexo-部署到-GitHub" class="headerlink" title="把本地 Hexo 部署到 GitHub"></a>把本地 Hexo 部署到 GitHub</h3><p>首先，需要修改站点的配置文件 <code>_config.yml</code>, 在文件中添加<br><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">deploy</span>:</span><br><span class="line">  <span class="attribute">type</span>: git</span><br><span class="line">  <span class="attribute">repository</span>: <span class="attribute">https</span>:<span class="comment">//github.com/cxyfreedom/cxyfreedom.github.io.git</span></span><br><span class="line">  <span class="attribute">branch</span>: master</span><br></pre></td></tr></table></figure></p><p>然后执行以下命令，就能够很容易把 Hexo 部署到 GitHub 上面<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> hexo clean    <span class="comment">#清除缓存</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> hexo g    <span class="comment"># 生成静态文件</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> hexo d    <span class="comment"># 部署网站</span></span></span><br></pre></td></tr></table></figure></p><p>正常情况下，稍微等一会儿，输入<code>XXX.github.io</code>就能看到搭建好的博客了～</p><h2 id="绑定独立域名"><a href="#绑定独立域名" class="headerlink" title="绑定独立域名"></a>绑定独立域名</h2><ol><li><p>购买独立域名<br>域名购买我是选择通过 <a href="https://www.godaddy.com/" target="_blank" rel="noopener">Godaddy</a>, 找个优惠码注册，购买，一般没有什么问题</p></li><li><p>域名解析<br>因为Godaddy的关系，我把域名解析移到了国内，我选择了 <a href="https://www.dnspod.cn/" target="_blank" rel="noopener">DNSPOD</a>, 目前来说还是比较稳定的</p></li><li><p>绑定域名<br>在你博客根目录下的 <code>source</code> 中，新建一个 <code>CNAME</code> 文件。在文件中填写你的域名。例如</p><blockquote><p>reishin.me</p></blockquote></li></ol><p>最后部署到 GitHub 上面</p><h2 id="博客同步和备份"><a href="#博客同步和备份" class="headerlink" title="博客同步和备份"></a>博客同步和备份</h2><p>由于我们可能会在不同的 PC 上进行文章的编写，那么自然而然的我们需要同步我们的博客。<br>因为有些配置文件涉及到一些隐私数据，所以为了安全起见，我选择了用 <code>bitbucket</code> 上建立一个私有仓库，然后把整个 Hexo 的文件用 git 来备份到仓库。因为 Hexo 的主题文件默认是不会同步的，为了便于博客更好的同步更新，我另外使用了一个 <code>git-backup</code> 的插件，这个插件可以备份整个博客，包括主题。</p><p>1.新建仓库并配置 SSH KEY 到 bitbucket 上</p><p>2.安装插件</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> npm install hexo-git-backup --save    <span class="comment"># install base on 3.x.x</span></span></span><br></pre></td></tr></table></figure><p>3.配置文件</p><p>在根目录下的 <code>_config.yml</code> 添加以下内容</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">backup</span>:</span><br><span class="line">    <span class="attribute">type</span>: git</span><br><span class="line">    <span class="attribute">theme</span>: <span class="built_in">`theme`</span></span><br><span class="line">    <span class="attribute">message</span>: <span class="built_in">`commit的内容`</span></span><br><span class="line">    <span class="attribute">repository</span>:</span><br><span class="line">        <span class="attribute">bitbucket</span>: git<span class="variable">@bitbucket</span>.<span class="attribute">org</span>:xxx/xxx.git,branchName</span><br></pre></td></tr></table></figure><p>4.备份博客</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> hexo b</span></span><br></pre></td></tr></table></figure><p>5.同步博客</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 依次安装 git 和 nodejs</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> npm install -g hexo-cli</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">clone</span> git@bitbucket.org:cxyfreedom/hexo-blog.git</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> hexo-blog</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> npm install hexo --save</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> npm install</span></span><br></pre></td></tr></table></figure><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>第一次搭建博客的确花了不少时间，虽然搭建的过程大同小异，但是自己也遇到了很多配置上面的问题，所以只有耐心尝试，才能真正的搭建自己的博客。相比其他搭建博客的方式，Hexo + GitHub 这种方式的确更加简便，可塑性也非常高。</p><p>目前还只是初步搭建完成，还有很多细节的地方需要完善。博客也只是个平台，要坚持写文章才能让博客有意义，现在还只是个开始。</p><p>这篇文章只是大致描述了搭建的过程，如果能够对你有帮助，真是再好不过了～<br>欢迎相互交流～</p><h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><p>[1] <a href="http://cnfeat.com/blog/2014/05/10/how-to-build-a-blog/" target="_blank" rel="noopener">如何搭建一个独立博客——简明 Github Pages与 jekyll 教程</a><br>[2] <a href="http://www.jianshu.com/p/73779eacb494#" target="_blank" rel="noopener">Hexo 静态博客使用指南</a><br>[3] <a href="http://chitanda.me/2015/06/18/hexo-sync-in-multiple-pc/" target="_blank" rel="noopener">利用 git 解决 hexo 博客多PC间同步问题</a><br>[4] <a href="http://www.zhihu.com/question/21193762" target="_blank" rel="noopener">使用 hexo，如果换了电脑怎么更新博客？</a><br>[5] <a href="http://hexo.io/" target="_blank" rel="noopener">Hexo 官网</a></p><h2 id="更新日志"><a href="#更新日志" class="headerlink" title="更新日志"></a>更新日志</h2><ul><li>[2016.01.15] 增加一些步骤的细节和同步的方法</li><li>[2016.07.04] 更新主题版本，修正一些细节</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;网上看到各式各样的博客，因此，自己也想拥有一个属于自己的独立博客。利用搜索引擎，最终选择了 Hexo + Github 的方式来搭建一个静态博客。搭建完成后，决定把自己从开始到搭建完成的整个过程给记录下来，也可以给以后搭建博客的人一个参考。&lt;br&gt;
    
    </summary>
    
    
      <category term="Hexo" scheme="https://reishin.me/tags/Hexo/"/>
    
      <category term="Blog" scheme="https://reishin.me/tags/Blog/"/>
    
  </entry>
  
</feed>
